<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	locale="#{localeBean.usedLocale}"
	xmlns:f="http://java.sun.com/jsf/core">
	<f:metadata>
		<f:event type="preRenderView" listener="#{simuladorBean.onPageLoad}" />
	</f:metadata>

	<h:form id="form">
		<h2 style="color: #007d4c;">SIMULADOR DE CUOTAS</h2>

		<h:panelGrid id="grid" columns="4">
			<h:outputLabel for="montoTotal" value="Monto total: " />
			<p:inputNumber id="montoTotal" style="margin:10px; width:220px" value="#{simuladorBean.montoTotal}" modifyValueOnWheel="false" >
				<p:ajax listener="#{simuladorBean.calcularMontoDeuda}" update=":form:grid" />
			</p:inputNumber>
			
			<h:outputLabel for="montoDeuda" value="Monto deuda: " />
			<h:outputLabel id="montoDeuda"  value="#{simuladorBean.textoDeuda}" />
						
			<h:outputLabel for="montoInicial" value="Monto inicial: " />
			<p:inputNumber id="montoInicial" style="margin:10px; width:220px" value="#{simuladorBean.montoInicial}" modifyValueOnWheel="false" >
				<p:ajax listener="#{simuladorBean.calcularMontoDeuda}" update=":form:grid" />
			</p:inputNumber>
			
			<h:outputLabel for="interes" value="Interés: " />
			<p:inputNumber id="interes" value="#{simuladorBean.porcentaje}" symbol="%" symbolPosition="s" emptyValue="always" />
     		
     		<h:outputLabel for="cuotas" value="N° Cuotas: " />
   			<p:selectOneMenu  style="margin:10px; width:220px" id="cuotas" value="#{simuladorBean.numeroCuotas}">
				<f:selectItem itemLabel="6 meses" itemValue="#{6}"/>
				<f:selectItem itemLabel="12 meses" itemValue="#{12}"/>
				<f:selectItem itemLabel="18 meses" itemValue="#{18}"/>
				<f:selectItem itemLabel="24 meses" itemValue="#{24}"/>
				<f:selectItem itemLabel="36 meses" itemValue="#{36}"/>
				<f:selectItem itemLabel="48 meses" itemValue="#{48}"/>
				<f:selectItem itemLabel="60 meses" itemValue="#{60}"/>
				
				<p:ajax listener="#{simuladorBean.calcularPorcentaje}" update=":form:grid" />
			</p:selectOneMenu>

		</h:panelGrid>
		
		<p:commandButton value="Simular" actionListener="#{simuladorBean.simularCuotas()}" update="form:idTableSimulador" />
		
		<p:dataTable var="simulador" id="idTableSimulador" emptyMessage="Vacío." style="margin:20px" value="#{simuladorBean.lstSimulador}" widgetVar="personsTable" rowIndexVar="row" size="small">
		
			<p:column headerText="Nro. Cuota">
				<h:outputText value="#{simulador.nroCuota}" />
			</p:column>
			
			<p:column headerText="Inicial">
				<h:outputText value="#{simulador.inicial}">
	                <f:convertNumber type="currency" currencySymbol="S/"/>
	            </h:outputText>
			</p:column>
			
			<p:column headerText="Cuota S.I">
				<h:outputText value="#{simulador.cuotaSI}">
	                <f:convertNumber type="currency" currencySymbol="S/"/>
	            </h:outputText>
			</p:column>
			
			<p:column headerText="Interés">
				<h:outputText value="#{simulador.interes}">
	                <f:convertNumber type="currency" currencySymbol="S/"/>
	            </h:outputText>
			</p:column>
			
			<p:column headerText="Cuota total">
				<h:outputText value="#{simulador.cuotaTotal}">
	                <f:convertNumber type="currency" currencySymbol="S/"/>
	            </h:outputText>
			</p:column>

		</p:dataTable>
	</h:form>


</ui:composition>